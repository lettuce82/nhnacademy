<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Customer Inquiries</title>
    <link rel="stylesheet" href="/style.css">
</head>
<body>
<div class="container">
    <h1 th:text="#{customerInquiries}"></h1>

    <div class="search-box">
        <form th:action="@{/cs(category=${selectedCategory})}" method="get">
            <label for="category" th:text="#{filterByCategory}"></label>
            <select id="category" name="category">
                <option value="">All</option>
                <option th:each="cat : ${T(com.nhnacademy.nhnmart.domain.Inquiry.InquiryCategory).values()}"
                        th:value="${cat}"
                        th:selected="${cat == selectedCategory}"
                        th:text="${cat}">
                </option>
            </select>
            <button type="submit" th:text="#{search}"></button>
        </form>
    </div>

    <div class="inquiry-list">
        <table>
            <thead>
            <tr>
                <th th:text="#{title}"></th>
                <th th:text="#{category}"></th>
                <th th:text="#{createdAt}"></th>
                <th th:text="#{answered}"></th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="inquiry, status : ${inquiries}">
                <td><a th:href="@{/cs/inquiry/{id}(id=${inquiry.id})}" th:text="${inquiry.title}"></a></td>
                <td th:text="${inquiry.category}"></td>
                <td th:text="${#temporals.format(inquiry.createdAt, 'yyyy-MM-dd HH:mm')}"></td>
                <td th:text="${hasAnswerList[__${status.index}__] ? 'Yes' : 'No'}"></td>
            </tr>
            </tbody>
        </table>
    </div>

    <button onclick="location.href='/cs/inquiry'" th:text="#{createNewInquiry}"></button>
    <div class="button-group">
        <a href="/cs/logout"><span th:text="#{logout}"></span></a>
    </div>

    <div class="language-switcher">
        <a href="?locale=ko">ko</a>
        <a href="?locale=en">en</a>
    </div>
</div>
</body>
</html>
